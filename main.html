<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netflix - Browse</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header class="main-header">
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container-fluid">
                <a href="main.html" class="navbar-brand me-4">
                    <img src="images/better.png" alt="NETFLIX" class="logo-nav">
                </a>
                
                <div class="navbar-nav d-none d-lg-flex me-auto">
                    <a class="nav-link text-white active" href="main.html" style="margin-right: 20px;">Home</a>
                    <a class="nav-link text-white" href="#" style="margin-right: 20px;">TV Shows</a>
                    <a class="nav-link text-white" href="#" style="margin-right: 20px;">Movies</a>
                    <a class="nav-link text-white" href="#" style="margin-right: 20px;">Games</a>
                    <a class="nav-link text-white" href="#" style="margin-right: 20px;">New & Popular</a>
                    <a class="nav-link text-white" href="#" style="margin-right: 20px;">My List</a>
                    <a class="nav-link text-white" href="#" style="margin-right: 20px;">Browse by Languages</a>
                </div>
                
                <div class="d-flex align-items-center">
                    <div class="search-icon me-3" style="color: white; font-size: 18px; cursor: pointer;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="notifications-icon me-3" style="color: white; font-size: 18px; cursor: pointer;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="dropdown">
                        <div class="profile-dropdown-container d-flex align-items-center" data-bs-toggle="dropdown" style="cursor: pointer;">
                            <div class="profile-icon" id="currentProfileAvatar" style="width: 32px; height: 32px; background-color: #666; border-radius: 4px; overflow: hidden;">
                                <img id="profileImage" src="" alt="Profile" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                            </div>
                            <div class="dropdown-arrow ms-1" style="color: white; font-size: 12px;">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 9L12 15L18 9" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                        </div>
                        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark">
                            <li><a class="dropdown-item" href="profiles.html">Switch Profiles</a></li>
                            <li><a class="dropdown-item" href="#">Account</a></li>
                            <li><a class="dropdown-item" href="#">Help Center</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="netflixLogout()">Sign out</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    
    <main class="main-content">
        <!-- Hero Section -->
        <div class="hero-section" style="background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://occ-0-2794-2219.1.nflxso.net/dnm/api/v6/6AYY37jfdO6hpXcMjf9Yu5cnmO0/AAAABXYqjKlOlz6xlkwvtdV-YwdBm-GJnPkKoGJJzPaJGXXbT7gzPqQ8wbX4pIoSCu0jD3PL8c9wgkBDBkDpbBu9bkBkP9U.jpg'); background-size: cover; background-position: center; height: 80vh; display: flex; align-items: center; margin-bottom: 60px;">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <h1 class="display-4 text-white mb-4" style="font-weight: 700;">Stranger Things</h1>
                        <p class="lead text-white mb-4">When a young boy vanishes, a small town uncovers a mystery involving secret experiments, terrifying supernatural forces, and one strange little girl.</p>
                        <div class="hero-buttons">
                            <button class="btn btn-light btn-lg me-3" style="padding: 12px 24px; border-radius: 4px;">
                                ‚ñ∂Ô∏è Play
                            </button>
                            <button class="btn btn-secondary btn-lg" style="padding: 12px 24px; border-radius: 4px; background-color: rgba(109, 109, 110, 0.7); border: none;">
                                ‚ÑπÔ∏è More Info
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search and Controls (Netflix Style) -->
        <div class="container-fluid mb-4" style="max-width: 1400px;">
            <div class="row">
                <div class="col-12">
                    <div class="netflix-search-controls d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4">
                        <div class="search-container flex-grow-1" style="max-width: 400px;">
                            <input 
                                type="text" 
                                id="searchInput" 
                                class="form-control netflix-search" 
                                placeholder="üîç Search titles..."
                                style="background: rgba(51, 51, 51, 0.7); border: 1px solid #555; color: white; border-radius: 2px; padding: 8px 40px 8px 14px; font-size: 14px;"
                            >
                        </div>
                        <button 
                            id="sortButton" 
                            class="btn netflix-sort-btn"
                            style="background: rgba(109, 109, 110, 0.7); border: none; color: white; border-radius: 2px; padding: 8px 16px; font-size: 14px; font-weight: 500;"
                        >
                            üî§ Sort A-Z
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Netflix Content Sections -->
        <div class="netflix-content-container" style="max-width: 1400px; margin: 0 auto;">
            
            <!-- Continue Watching Section -->
            <div class="netflix-row mb-4" id="continueWatchingSection">
                <div class="row-header d-flex align-items-center mb-3">
                    <h3 class="row-title text-white m-0" style="font-size: 20px; font-weight: 700;">Continue Watching for <span id="profileNameDisplay">User</span></h3>
                </div>
                <div class="row-content">
                    <div class="netflix-slider" id="continueWatchingSlider">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Trending Now Section -->
            <div class="netflix-row mb-4" id="trendingSection">
                <div class="row-header d-flex align-items-center mb-3">
                    <h3 class="row-title text-white m-0" style="font-size: 20px; font-weight: 700;">Trending Now</h3>
                </div>
                <div class="row-content">
                    <div class="netflix-slider" id="trendingSlider">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Popular Movies Section -->
            <div class="netflix-row mb-4" id="moviesSection">
                <div class="row-header d-flex align-items-center mb-3">
                    <h3 class="row-title text-white m-0" style="font-size: 20px; font-weight: 700;">Popular Movies</h3>
                </div>
                <div class="row-content">
                    <div class="netflix-slider" id="moviesSlider">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Series Section -->
            <div class="netflix-row mb-4" id="seriesSection">
                <div class="row-header d-flex align-items-center mb-3">
                    <h3 class="row-title text-white m-0" style="font-size: 20px; font-weight: 700;">Popular Series</h3>
                </div>
                <div class="row-content">
                    <div class="netflix-slider" id="seriesSlider">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Search Results Section (Hidden by default) -->
            <div class="netflix-row mb-4" id="searchResultsSection" style="display: none;">
                <div class="row-header d-flex align-items-center mb-3">
                    <h3 class="row-title text-white m-0" style="font-size: 20px; font-weight: 700;">Search Results</h3>
                </div>
                <div class="row-content">
                    <div class="netflix-slider" id="searchResultsSlider">
                        <!-- Search results will be inserted here -->
                    </div>
                </div>
            </div>

        </div>
                    
            <!-- Mobile Menu for smaller screens -->
            <div class="d-md-none mt-4">
                <h4 class="text-white mb-3">Browse Categories</h4>
                <div class="list-group list-group-flush">
                    <a href="main.html" class="list-group-item list-group-item-dark active" style="background-color: #333; color: white; border-color: #333;">
                        üè† Home
                    </a>
                    <a href="#" class="list-group-item list-group-item-dark" style="background-color: #141414; color: white; border-color: #333;">
                        üì∫ TV Shows
                    </a>
                    <a href="#" class="list-group-item list-group-item-dark" style="background-color: #141414; color: white; border-color: #333;">
                        üé¨ Movies
                    </a>
                    <a href="#" class="list-group-item list-group-item-dark" style="background-color: #141414; color: white; border-color: #333;">
                        üî• New & Popular
                    </a>
                    <a href="#" class="list-group-item list-group-item-dark" style="background-color: #141414; color: white; border-color: #333;">
                        üìù My List
                    </a>
                    <a href="#" class="list-group-item list-group-item-dark" style="background-color: #141414; color: white; border-color: #333;">
                        üåç Browse by Languages
                    </a>
                </div>
            </div>
        </div>
    </main>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/login.js"></script>
    
    <script>
        // Enhanced Mock Data Catalog with Netflix Categories
        const CONTENT_DATA = [
            // Continue Watching (Recently viewed content with progress)
            { id: 1, title: "Stranger Things", category: "Series", description: "When a young boy vanishes, a small town uncovers mysteries.", likes: 1250, image: "https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?w=400&h=225&fit=crop", section: "continue", progress: 65 },
            { id: 2, title: "The Crown", category: "Series", description: "The reign of Queen Elizabeth II after World War II.", likes: 980, image: "https://images.unsplash.com/photo-1580130775562-0ef92da028de?w=400&h=225&fit=crop", section: "continue", progress: 23 },
            { id: 3, title: "Breaking Bad", category: "Series", description: "A high school teacher turns to manufacturing drugs.", likes: 2100, image: "https://images.unsplash.com/photo-1489599165726-e77b26de1925?w=400&h=225&fit=crop", section: "continue", progress: 89 },
            
            // Trending Now
            { id: 4, title: "Wednesday", category: "Series", description: "A supernatural mystery comedy horror coming-of-age series.", likes: 3200, image: "https://images.unsplash.com/photo-1567744726458-d5c7e8ad38e0?w=400&h=225&fit=crop", section: "trending" },
            { id: 5, title: "Glass Onion", category: "Movie", description: "A detective investigates a murder mystery at a Greek island.", likes: 1800, image: "https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=225&fit=crop", section: "trending" },
            { id: 6, title: "The Sandman", category: "Series", description: "A mythic figure is captured and must rebuild his realm.", likes: 2850, image: "https://images.unsplash.com/photo-1440404653325-ab127d49abc1?w=400&h=225&fit=crop", section: "trending" },
            { id: 7, title: "Dahmer", category: "Series", description: "The story of one of America's most notorious serial killers.", likes: 1650, image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=225&fit=crop", section: "trending" },
            
            // Popular Movies
            { id: 8, title: "Top Gun: Maverick", category: "Movie", description: "After thirty years, Maverick is still pushing the envelope.", likes: 2400, image: "https://images.unsplash.com/photo-1489599165726-e77b26de1925?w=400&h=225&fit=crop", section: "movies" },
            { id: 9, title: "The Adam Project", category: "Movie", description: "A time-traveling fighter pilot teams up with his younger self.", likes: 2900, image: "https://images.unsplash.com/photo-1576267423445-b2e0074d68a4?w=400&h=225&fit=crop", section: "movies" },
            { id: 10, title: "Red Notice", category: "Movie", description: "An FBI profiler pursues the world's most wanted art thief.", likes: 1950, image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=225&fit=crop", section: "movies" },
            { id: 11, title: "Don't Look Up", category: "Movie", description: "Two astronomers try to warn humanity about an approaching comet.", likes: 1750, image: "https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=225&fit=crop", section: "movies" },
            
            // Popular Series
            { id: 12, title: "The Witcher", category: "Series", description: "A monster hunter struggles to find his place.", likes: 2200, image: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=225&fit=crop", section: "series" },
            { id: 13, title: "Ozark", category: "Series", description: "A family launders money for a Mexican drug cartel.", likes: 1870, image: "https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?w=400&h=225&fit=crop", section: "series" },
            { id: 14, title: "Squid Game", category: "Series", description: "Players compete in deadly children's games for a cash prize.", likes: 3500, image: "https://images.unsplash.com/photo-1580130775562-0ef92da028de?w=400&h=225&fit=crop", section: "series" },
            { id: 15, title: "Money Heist", category: "Series", description: "A group of robbers assault the Royal Mint of Spain.", likes: 2650, image: "https://images.unsplash.com/photo-1489599165726-e77b26de1925?w=400&h=225&fit=crop", section: "series" }
        ];

        // Netflix Feed Application with Horizontal Scrolling
        class NetflixFeed {
            constructor() {
                this.allContent = [...CONTENT_DATA];
                this.likedItems = this.getLikedFromStorage();
                this.searchTerm = '';
                this.isAlphaSorted = false;
                this.sections = {
                    continue: this.allContent.filter(item => item.section === 'continue'),
                    trending: this.allContent.filter(item => item.section === 'trending'),
                    movies: this.allContent.filter(item => item.section === 'movies'),
                    series: this.allContent.filter(item => item.section === 'series')
                };
                
                this.init();
            }

            init() {
                this.loadProfile();
                this.renderAllSections();
                this.setupEventListeners();
            }

            loadProfile() {
                const profileAvatars = {
                    'paul': 'https://i.pravatar.cc/150?img=1',
                    'alon': 'https://i.pravatar.cc/150?img=8', 
                    'ronni': 'https://i.pravatar.cc/150?img=9',
                    'anna': 'https://i.pravatar.cc/150?img=5',
                    'noa': 'https://i.pravatar.cc/150?img=10'
                };
                
                const profileId = localStorage.getItem('netflix:profileId');
                const profileName = localStorage.getItem('netflix:profileName') || 'User';
                const profileImage = document.getElementById('profileImage');
                const profileNameDisplay = document.getElementById('profileNameDisplay');
                
                if (profileId && profileAvatars[profileId] && profileImage) {
                    profileImage.src = profileAvatars[profileId];
                    profileImage.style.display = 'block';
                }
                
                if (profileNameDisplay) {
                    profileNameDisplay.textContent = profileName;
                }
            }

            setupEventListeners() {
                // Search functionality
                const searchInput = document.getElementById('searchInput');
                searchInput.addEventListener('input', (e) => {
                    this.searchTerm = e.target.value.toLowerCase().trim();
                    this.handleSearch();
                });

                // Sort functionality
                const sortButton = document.getElementById('sortButton');
                sortButton.addEventListener('click', () => {
                    this.toggleAlphaSort();
                });
            }

            handleSearch() {
                const searchResultsSection = document.getElementById('searchResultsSection');
                const allSections = document.querySelectorAll('.netflix-row:not(#searchResultsSection)');
                
                if (this.searchTerm) {
                    // Hide all normal sections
                    allSections.forEach(section => {
                        section.style.display = 'none';
                    });
                    
                    // Show search results
                    searchResultsSection.style.display = 'block';
                    this.renderSearchResults();
                } else {
                    // Show all normal sections
                    allSections.forEach(section => {
                        section.style.display = 'block';
                    });
                    
                    // Hide search results
                    searchResultsSection.style.display = 'none';
                    this.renderAllSections();
                }
            }

            renderSearchResults() {
                let filtered = this.allContent.filter(item => 
                    item.title.toLowerCase().includes(this.searchTerm)
                );

                if (this.isAlphaSorted) {
                    filtered.sort((a, b) => a.title.localeCompare(b.title));
                }

                const searchSlider = document.getElementById('searchResultsSlider');
                
                if (filtered.length === 0) {
                    searchSlider.innerHTML = `
                        <div style="color: #666; text-align: center; width: 100%; padding: 40px;">
                            <h4>No results found</h4>
                            <p>Try adjusting your search terms</p>
                        </div>
                    `;
                    return;
                }

                searchSlider.innerHTML = filtered.map(item => this.createNetflixCard(item)).join('');
            }

            toggleAlphaSort() {
                this.isAlphaSorted = !this.isAlphaSorted;
                const sortButton = document.getElementById('sortButton');
                
                if (this.isAlphaSorted) {
                    sortButton.textContent = 'üî§ Sorted A-Z';
                    sortButton.classList.add('active');
                } else {
                    sortButton.textContent = 'üî§ Sort A-Z';
                    sortButton.classList.remove('active');
                }
                
                // Re-render current view
                if (this.searchTerm) {
                    this.renderSearchResults();
                } else {
                    this.renderAllSections();
                }
            }

            createNetflixCard(item) {
                const isLiked = this.likedItems.has(item.id);
                const likeCount = item.likes + (isLiked ? 1 : 0);
                const progress = item.progress || 0;

                return `
                    <div class="netflix-card" data-id="${item.id}">
                        <div class="netflix-card-image" style="background-image: url('${item.image}')">
                            ${progress > 0 ? `<div style="position: absolute; bottom: 0; left: 0; height: 3px; background: var(--netflix-red); width: ${progress}%; z-index: 2;"></div>` : ''}
                            
                            <div class="netflix-card-overlay"></div>
                            
                            <button class="netflix-like-btn ${isLiked ? 'liked' : ''}" onclick="netflixFeed.toggleLike(${item.id}, event)">
                                <span style="font-size: 14px;">
                                    ${isLiked ? '‚ù§Ô∏è' : 'ü§ç'}
                                </span>
                            </button>
                            
                            <div class="netflix-card-info">
                                <div class="netflix-card-title">${item.title}</div>
                                <div class="netflix-card-meta">
                                    <span class="netflix-card-category">${item.category}</span>
                                    <span class="netflix-card-likes">
                                        ‚ù§Ô∏è <span class="like-count-${item.id}">${likeCount}</span>
                                    </span>
                                </div>
                                <div class="netflix-card-description">${item.description}</div>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderSection(sectionId, content) {
                const slider = document.getElementById(sectionId);
                if (!slider) return;

                let sectionContent = [...content];
                if (this.isAlphaSorted) {
                    sectionContent.sort((a, b) => a.title.localeCompare(b.title));
                }

                slider.innerHTML = sectionContent.map(item => this.createNetflixCard(item)).join('');
            }

            renderAllSections() {
                this.renderSection('continueWatchingSlider', this.sections.continue);
                this.renderSection('trendingSlider', this.sections.trending);
                this.renderSection('moviesSlider', this.sections.movies);
                this.renderSection('seriesSlider', this.sections.series);
            }

            toggleLike(itemId, event) {
                event.stopPropagation();
                
                const likeButton = event.currentTarget;
                const heartIcon = likeButton.querySelector('span');
                
                // Add animation class
                likeButton.classList.add('netflix-like-animation');
                setTimeout(() => {
                    likeButton.classList.remove('netflix-like-animation');
                }, 300);

                if (this.likedItems.has(itemId)) {
                    this.likedItems.delete(itemId);
                    heartIcon.textContent = 'ü§ç';
                    likeButton.classList.remove('liked');
                } else {
                    this.likedItems.add(itemId);
                    heartIcon.textContent = '‚ù§Ô∏è';
                    likeButton.classList.add('liked');
                }

                // Update like count
                const item = this.allContent.find(item => item.id === itemId);
                const newCount = item.likes + (this.likedItems.has(itemId) ? 1 : 0);
                const likeCountElements = document.querySelectorAll(`.like-count-${itemId}`);
                likeCountElements.forEach(el => {
                    el.textContent = newCount;
                });

                // Save to localStorage
                this.saveLikesToStorage();
            }

            getLikedFromStorage() {
                const stored = localStorage.getItem('netflix:likedItems');
                return stored ? new Set(JSON.parse(stored)) : new Set();
            }

            saveLikesToStorage() {
                localStorage.setItem('netflix:likedItems', JSON.stringify([...this.likedItems]));
            }
        }

        // Initialize the feed when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.netflixFeed = new NetflixFeed();
        });
    </script>
    
</body>
</html>